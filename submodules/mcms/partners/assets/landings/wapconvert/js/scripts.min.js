$(document).ready(function () {

  $doc = $(document);
  $win = $(window);

  $('.js-traffic-slider').slick({
    slidesToShow: 9,
    slidesToScroll: 1,
    responsive: [
      {
        breakpoint: 991,
        settings: {
          slidesToShow: 5,
        }
      },
      {
        breakpoint: 767,
        settings: {
          slidesToShow: 1,
        }
      }
    ]
  });

  //getcontent
  $('.js-getcontent-form-clear').on('click', function () {
    $('.js-getcontent-form-input').val('');
    return false;
  });

  //scrollup
  $('.js-scroll-up').on('click', function () {
    $('html,body').animate({
      scrollTop: 0
    }, 500);
    return false;
  });

  //header
  var header = {
    $header: $('.header'),
    $headerHeight: $('.header-height'),
    headerHeight: function () {
      return this.$header.innerHeight();
    },
    scroll: function () {
      var scroll = $doc.scrollTop();
      if (scroll >= header.headerHeight()) {
        header.isFixed(true);
      } else {
        header.isFixed(false);
      }
    },
    isFixed: function (isFixed) {
      if (isFixed) {
        header.$header.addClass('header--fixed');
        header.$headerHeight.show(0);
      } else {
        header.$header.removeClass('header--fixed');
        header.$headerHeight.hide(0);
      }
    }
  }
  $win.on('scroll', header.scroll);
  $('.js-select-lang').on('click', function () {
    $('.header-controls-lang-list').slideToggle(200);
    return false;
  });
  $('.header-controls-lang-list a').on('click', function () {
    $('.header-controls-lang-list').slideUp(100);
  })

  //conversion
  function conversion() {
    this.$container = $('.js-conversion');
    this.$form = $('.js-conversion-control-form');
    this.$info = $('.js-conversion-info');
    this.runAnimation = function (amount, ratio) {
      var $sum1 = $('.js-conversion-sum1');
      var $sum2 = $('.js-conversion-sum2');
      var $sum3 = $('.js-conversion-sum3');
      amount = parseInt(amount, 10);
      ratio = parseFloat(ratio);
      if(isNaN(amount)) {
        amount = 0;
      }
      var number_step = $.animateNumber.numberStepFactories.separator(' ');
      $sum1.animateNumber({
        number: (amount * ratio),
        numberStep: number_step
      }, 500);
      $sum2.animateNumber({
        number: (amount * ratio * 30),
        numberStep: number_step
      }, 500);
      $sum3.animateNumber({
        number: (amount * ratio * 365),
        numberStep: number_step
      }, 500);
    },
      this.clearData = function () {
        var $sum1 = $('.js-conversion-sum1');
        var $sum2 = $('.js-conversion-sum2');
        var $sum3 = $('.js-conversion-sum3');
        var number_step = $.animateNumber.numberStepFactories.separator(' ');
        $sum1.animateNumber({
          number: 00,
          numberStep: number_step
        }, 50);
        $sum2.animateNumber({
          number: 00,
          numberStep: number_step
        }, 50);
        $sum3.animateNumber({
          number: 00,
          numberStep: number_step
        }, 50);
      }
  }

  var conversion = new conversion();
  $('.js-conversion-input').on('keyup', function () {
    var ratio = $('.js-conversion-select select option:selected').attr('data-ratio'),
      amount = $(this).val();
    conversion.runAnimation(amount, ratio);
  });
  $('.js-conversion-select').find('select').on('change', function () {
    $(this).parent().find('.text').text($(this).val());
    var $this = $(this),
      ratio = $this.find('option:selected').attr('data-ratio'),
      amount = $this.parents('.js-conversion-control-form').find('.js-conversion-input').val();
    conversion.clearData();
    conversion.runAnimation(amount, ratio);
  });
  $('.js-conversion-select').on('click', function () {
    $(this).find('select').trigger('click');
  });
  $('.form-modal .form-select').next().on('change', function () {
    $(this).prev().find('.text').text($(this).find('option:selected').text());
  });
  $('.form-modal .form-select').on('click', function () {
    $(this).next().trigger('click');
  });


});
$(document).ready(function ($) {
  //modals
  $('.js-open-reg').on('click', function () {
    $.arcticmodal('close');
    $('.js-modal-reg').arcticmodal();
    return false;
  });
  $('.js-open-login').on('click', function () {
    $.arcticmodal('close');
    $('.js-modal-login').arcticmodal();
    return false;
  });
  $('.js-open-passwordresetrequest').on('click', function () {
    $.arcticmodal('close');
    $('.js-modal-passwordresetrequest').arcticmodal();
    return false;
  });
  $('.js-open-passwordreset').on('click', function () {
    $.arcticmodal('close');
    $('.js-modal-passwordreset').arcticmodal();
    return false;
  });
  $('.js-open-faq').on('click', function () {
    $.arcticmodal('close');
    $('.js-modal-faq').arcticmodal();
    return false;
  });
  $('.js-open-success').on('click', function () {
    $.arcticmodal('close');
    $('.js-modal-success').arcticmodal();
    return false;
  });
  $('.js-open-fail').on('click', function () {
    $.arcticmodal('close');
    $('.js-modal-fail').arcticmodal();
    return false;
  });

  //animate
  $('.anim').addClass("hidden");
  $('.anim-fade-up').viewportChecker({
    classToAdd: 'visible animated fadeInUp',
    offset: 100
  });
  $('.anim-fade-down').viewportChecker({
    classToAdd: 'visible animated fadeInDown',
    offset: 100
  });
  $('.anim-fade-right').viewportChecker({
    classToAdd: 'visible animated fadeInRight',
    offset: 100
  });
  $('.anim-fade-in').viewportChecker({
    classToAdd: 'visible animated fadeIn',
    offset: 100
  });
  $('.anim-zoom-in').viewportChecker({
    classToAdd: 'visible animated zoomIn',
    offset: 100
  });
  $('.anim-getcontent').viewportChecker({
    classToAdd: 'visible animated fadeInUp',
    offset: 100,
    callbackFunction: function () {
      setTimeout(function () {
        $('.getcontent-message').addClass('visible animated fadeInLeft');
      }, 900)
    }
  });
  $('.anim-benefit').viewportChecker({
    classToAdd: '',
    offset: 100,
    callbackFunction: function (elem, action) {
      var i = $(elem).index() + 1;
      setTimeout(function () {
        $(elem).addClass('visible animated zoomIn')
      }, i * 100);
    }
  });
  $('.anim-aswork').viewportChecker({
    classToAdd: '',
    offset: 100,
    callbackFunction: function (elem, action) {
      var i = $(elem).index() + 1;
      setTimeout(function () {
        $(elem).addClass('visible animated zoomIn')
      }, i * 100);
    }
  });
});